<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>分享测试</title>
    <script src="js/jquery.min.js"></script>
    <script src="http://res.wx.qq.com/open/js/jweixin-1.0.0.js"></script>
    
    <script>
		wx.config({
			debug: true, // 开启调试模式,调用的所有api的返回值会在客户端alert出来，若要查看传入的参数，可以在pc端打开，参数信息会通过log打出，仅在pc端时才会打印。
			appId: 'wxa2b618fb1705e8bb', // 必填，公众号的唯一标识
			timestamp: 1466582686, // 必填，生成签名的时间戳
			nonceStr: '12345', // 必填，生成签名的随机串
			signature: '123343',// 必填，签名，见附录1
			jsApiList: [    
			'checkJsApi',    
			'onMenuShareTimeline',    
			'onMenuShareAppMessage',
			]   // 必填，需要使用的JS接口列表，所有JS接口列表见附录2
		});
		wx.hideOptionMenu();
		wx.ready(function(){
			wx.showOptionMenu();
            wx.hideMenuItems({
                menuList: [
                    'menuItem:share:timeline', // 分享到朋友圈
                    'menuItem:share:qq',
                    'menuItem:share:weiboApp',
                    'menuItem:favorite',
                    'menuItem:share:facebook',
                    'menuItem:share:QZone',
                    'menuItem:editTag',
                    'menuItem:delete',
                    'menuItem:copyUrl', // 复制链接
                    'menuItem:originPage',
                    'menuItem:readMode', // 阅读模式
                    'menuItem:openWithQQBrowser',
                    'menuItem:openWithSafari',
                    'menuItem:share:email',
                    'menuItem:share:brand'
                ]
            });
			//判断当前客户端版本是否支持指定JS接口
			wx.checkJsApi({
				jsApiList: [    
				'checkJsApi',    
				'onMenuShareTimeline',    
				'onMenuShareAppMessage',
				], // 需要检测的JS接口列表，所有JS接口列表见附录2,
				success: function(res) {
					// 以键值对的形式返回，可用的api值true，不可用为false
					// 如：{"checkResult":{"chooseImage":true},"errMsg":"checkJsApi:ok"}
				}
			});
			wx.onMenuShareTimeline({
				title: '测试', // 分享标题
				link: 'http://dailinyi.github.io/web_test/window-shades/index.html', // 分享链接
				imgUrl: './images/snow.png', // 分享图标
				success: function () { 
					// 用户确认分享后执行的回调函数
					alert('1');
				},
				cancel: function () { 
					// 用户取消分享后执行的回调函数
					alert('11');
				}
			});
				wx.onMenuShareAppMessage({
				title: 'ceshi', // 分享标题
				desc: '木有啊', // 分享描述
				link: 'http://dailinyi.github.io/web_test/window-shades/index.html', // 分享链接
				imgUrl: './images/snow.png', // 分享图标
				type: '', // 分享类型,music、video或link，不填默认为link
				dataUrl: '', // 如果type是music或video，则要提供数据链接，默认为空
				success: function () { 
					// 用户确认分享后执行的回调函数
					alert('2');
				},
				cancel: function () { 
					// 用户取消分享后执行的回调函数
					alert('22');
				}
			}); 
		});
		wx.error(function(res){
		alert('重新来');
			// config信息验证失败会执行error函数，如签名过期导致验证失败，具体错误信息可以打开config的debug模式查看，也可以在返回的res参数中查看，对于SPA可以在这里更新签名。
		
		});
    </script>
</head>
<body>
<div class="zp">
<input type="button" value="分享" id="share"/>
</div>
</body>
</html>

